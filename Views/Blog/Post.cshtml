@model frontendplay.Models.BlogPostModel
@using frontendplay.Utilities

@{
  ViewBag.Title = Model.Title + " - frontendplay";
  ViewBag.Description = OutputUtilities.Chop(Model.ShortText, 160);
}

<div id="blogPost">
  <h1>@Html.DisplayFor(_ => Model.Title)</h1>
  <article>
    @Html.Raw(Model.HtmlText)
    <time datetime="@Model.MachineDate">@Model.FullDate</time>
    <i class="note">written by @Model.Author</i>
  </article>
</div>
<div id="blogComments">
  @if(Model.Comments.Count == 0)
  {
    <h1>No comments yet &nbsp;<b>:-(</b></h1>
    <div class="noComments"></div>
  }
  else
  {
    <h1><i class="entypo-comment"></i>Comments</h1>
    <ul>
      @foreach(var comment in Model.Comments.OrderByDescending(m => m.CreatedDate))
      {
      <li id="comment-@comment.ID">
        <img src="@comment.Image" alt="@comment.Name" />
        <div>
          <h4>@comment.Name <time datetime="@comment.MachineDate"><a href="#comment-@comment.ID">@comment.FullDate</a></time></h4>
          <p>@comment.Comment</p>
        </div>
      </li>
      }
    </ul>
  }
</div>
<div id="blogNewComment" data-post="/comment/@Model.ID"></div>